{%- if this.widgets %}
<div class="container-xxl">
  <div class="row row-cols-1 row-cols-md-2 row-cols-xl-3 g-4 justify-content-center">
    {%- for widget in this.widgets.blocks %}
    <div class="col">
      {%- if widget.url and widget.url.url != '' and this.link_whole_card %}
      <a href="{{ widget.url }}" class="card-link-full">
      {%- endif %}
      <div class="card h-100 card-item widget {% if this.transparent_bg %}transparent-bg{%- else %}offset-bg{%- endif %}">
        <div class="card-body">
          {%- if widget.content %}
          <div class="widget-content">
            {{ widget.content }}
          </div>
          {%- endif %}
          {%- if widget.title %}
          {%- if widget.url and widget.url.url != '' and not this.link_whole_card %}
          <a href="{{ widget.url }}" class="card-link-title">
            <h3 class="card-title">{{ widget.title }}</h3>
          </a>
          {%- else %}
          <h3 class="card-title">{{ widget.title }}</h3>
          {%- endif %}
          {%- endif %}
          <p class="card-text">
            {{ widget.description }}
          </p>
        </div>
      </div>
      {%- if widget.url and widget.url.url != '' and this.link_whole_card %}</a>{%- endif %}
    </div>
    {%- endfor %}
  </div>
</div>
{%- endif %}
{%- if this.update_script %}
<script>
  {{ this.update_script }}
</script>
{%- endif %}
